# BB84

یک روش **توزیع کلید کوانتومی** (Quantum Key Distribution) است که در سال ۱۹۸۴ توسط «**چارلز بنت**» و «**ژیل براسارد**» ابداع شد. این پروتکل، اولین پروتکل در زمینه **رمزنگاری کوانتومی** (نوعی رمزنگاری بر پایه اصول فیزیک کوانتوم) به شمار می‌رود. امنیت این روش، با فرض اجرای بی‌نقص، کاملاً اثبات شده است و بر دو اصل مهم تکیه دارد:

۱. **اصل کوانتومی**: هرگونه تلاش برای به دست آوردن اطلاعات (یعنی اندازه‌گیری یا مشاهده اطلاعات) فقط در صورتی ممکن است که سیگنال اصلی دچار **اختلال** شود. این اتفاق زمانی می‌افتد که دو حالتی که می‌خواهیم از هم تشخیص دهیم، **غیرمتعامد** (non-orthogonal) باشند (برای درک بهتر، به «**قضیه عدم شبیه‌سازی**» (no-cloning theorem) مراجعه کنید که بیان می‌کند نمی‌توان حالت کوانتومی ناشناخته‌ای را کپی کرد).
۲. **وجود کانال امن**: نیاز به یک **کانال ارتباطی عمومی اما احراز هویت شده** (Authenticated Public Classical Channel) داریم.

این پروتکل معمولاً به عنوان راهی امن برای انتقال یک **کلید محرمانه** (Private Key) از یک نفر به نفر دیگر توضیح داده می‌شود تا از آن در «**رمزنگاری یک‌بار مصرف**» (One-time pad encryption) استفاده شود. لازم به ذکر است که اثبات امنیت BB84 به **اجرای بی‌نقص** آن وابسته است. «**حملات جانبی**» (Side-channel attacks) که از اطلاعات غیرکوانتومی استفاده می‌کنند، می‌توانند امنیت این پروتکل را به خطر بیندازند. چون این اطلاعات کوانتومی نیستند، می‌توان آن‌ها را بدون اندازه‌گیری یا کپی کردن ذرات کوانتومی، رهگیری کرد.

---

## ۱. مروری بر پروتکل BB84

سیستم **توزیع کلید کوانتومی (QKD)** با استفاده از BB84، فوتون‌های مجزا را از طریق **کابل فیبر نوری** ارسال می‌کند. هر فوتون یک **بیت داده** (صفر یا یک) را نشان می‌دهد. در سمت فرستنده، **فیلترهای قطبش** (Polarizing filters) جهت‌گیری هر فوتون را تعیین می‌کنند، در حالی که گیرنده از «**تقسیم‌کننده‌های پرتو**» (Beam splitters) برای خواندن اطلاعات آن استفاده می‌کند. در نهایت، فرستنده و گیرنده جهت‌گیری فوتون‌های خود را با هم مقایسه می‌کنند و آن دسته از فوتون‌ها که جهت‌گیری یکسانی داشته‌اند، **کلید رمزنگاری** را تشکیل می‌دهند.

---

## ۲. توصیف پروتکل

یک شبیه‌سازی تعاملی از پیاده‌سازی نوری پروتکل توزیع کلید کوانتومی BB84 در آزمایشگاه مجازی «Quantum Flytrap» به صورت آنلاین در دسترس است. در این تنظیمات نوری، بیت‌ها با استفاده از حالت‌های قطبش متعامد فوتون‌ها کدگذاری می‌شوند. «آلیس» (فرستنده) و «باب» (گیرنده) پایه‌های اندازه‌گیری خود را با چرخاندن قطبش به میزان ۰ یا ۴۵ درجه با استفاده از «**چرخاننده‌های فارادی**» (Faraday rotators) انتخاب می‌کنند. «**آشکارسازهای تک‌فوتونی**» (Single-photon detectors) بعد از عبور فوتون‌ها از یک «**تقسیم‌کننده پرتو قطبشی**» (Polarizing beam splitter) که قطبش‌ها را از هم جدا می‌کند، خروجی را اندازه‌گیری می‌کنند.

در طرح BB84، «آلیس» می‌خواهد یک کلید خصوصی را به «باب» بفرستد. او کار را با دو رشته بیت تصادفی، a و b، شروع می‌کند که هر کدام n بیت طول دارند. سپس این دو رشته را به صورت «**ضرب تانسوری**» (Tensor product) از n **کیوبیت** (کوچک‌ترین واحد اطلاعات کوانتومی) کدگذاری می‌کند:

∣ψ⟩=i=1⨂n​∣ψai​bi​​⟩

در اینجا، ai​ و bi​ بیت‌های i-ام از a و b هستند. با ترکیب ai​ و bi​، می‌توان به چهار حالت کیوبیت زیر دست یافت:

$$|\psi _{00}\rangle =|0\rangle$$$$|\psi _{10}\rangle =|1\rangle$$$$|\psi _{01}\rangle =|+\rangle ={\frac {1}{\sqrt {2}}}|0\rangle +{\frac {1}{\sqrt {2}}}|1\rangle$$

∣ψ11​⟩=∣−⟩=2![](data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg>)​1​∣0⟩−2![](data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg>)​1​∣1⟩

نکته مهم این است که بیت bi​ تصمیم می‌گیرد که ai​ در کدام «**پایه**» (Basis) کدگذاری شود (یا در «**پایه محاسباتی**» (Computational basis) یا در «**پایه هادامارد**» (Hadamard basis)). کیوبیت‌ها در حالت‌هایی قرار می‌گیرند که متقابلاً **متعامد نیستند**. به همین دلیل، بدون دانستن b، تمایز تمام آن‌ها با قطعیت غیرممکن است.

«آلیس» حالت ∣ψ⟩ را از طریق یک **کانال کوانتومی عمومی و احراز هویت شده** E به «باب» می‌فرستد. «باب» حالتی به شکل E(ρ)=E(∣ψ⟩⟨ψ∣) دریافت می‌کند، که در آن E هم اثرات نویز در کانال و هم «**استراق سمع**» (Eavesdropping - گوش دادن یا مشاهده مخفیانه) توسط یک شخص سوم که آن را «حوا» (Eve) می‌نامیم، را نشان می‌دهد. پس از دریافت رشته کیوبیت‌ها توسط «باب»، هم «باب» و هم «حوا» حالت‌های خاص خود را دارند. اما چون فقط «آلیس» b را می‌داند، تقریباً برای «باب» یا «حوا» غیرممکن است که حالت‌های کیوبیت‌ها را تشخیص دهند. همچنین، پس از اینکه «باب» کیوبیت‌ها را دریافت کرد، می‌دانیم که «حوا» نمی‌تواند نسخه‌ای از کیوبیت‌های ارسال‌شده به «باب» را در اختیار داشته باشد، مگر اینکه اندازه‌گیری‌هایی انجام داده باشد. این به دلیل «**قضیه عدم شبیه‌سازی**» است. با این حال، اندازه‌گیری‌های «حوا»، اگر پایه اشتباه را حدس بزند، با احتمال 1/2 خطر ایجاد اختلال در آن کیوبیت خاص را در پی دارد.

«باب» سپس یک رشته بیت تصادفی b′ به همان طول b ایجاد می‌کند و کیوبیت‌هایی را که از «آلیس» دریافت کرده است، اندازه‌گیری کرده و رشته بیت a′ را به دست می‌آورد. در این مرحله، «باب» به صورت عمومی اعلام می‌کند که انتقال «آلیس» را دریافت کرده است. «آلیس» نیز متوجه می‌شود که اکنون می‌تواند b， یعنی پایه‌هایی که کیوبیت‌ها در آن‌ها آماده شده‌اند، را با خیال راحت اعلام کند. «باب» از طریق یک کانال عمومی با «آلیس» ارتباط برقرار می‌کند تا مشخص شود کدام bi​ و bi′​ با هم برابر نیستند. سپس، «آلیس» و «باب» بیت‌های موجود در a و a′ را که در آن‌ها b و b′ مطابقت ندارند، کنار می‌گذارند.

از بین k بیت باقی‌مانده که هم «آلیس» و هم «باب» در یک پایه اندازه‌گیری کرده‌اند، «آلیس» به صورت تصادفی k/2 بیت را انتخاب می‌کند و انتخاب‌های خود را از طریق کانال عمومی افشا می‌کند. هر دو نفر، «آلیس» و «باب»، این بیت‌ها را علناً اعلام می‌کنند و بررسی می‌کنند که آیا بیش از یک تعداد مشخصی از آن‌ها با هم مطابقت دارند یا خیر. اگر این بررسی با موفقیت انجام شود، «آلیس» و «باب» از «**تکنیک‌های آشتی اطلاعاتی**» (Information reconciliation) و «**تقویت حریم خصوصی**» (Privacy amplification) برای ایجاد تعدادی «**کلیدهای مخفی مشترک**» (Shared secret keys) استفاده می‌کنند. در غیر این صورت، پروتکل را لغو کرده و دوباره شروع می‌کنند.